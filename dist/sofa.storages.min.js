/**
 * sofa-storages - v0.2.2 - 2014-03-21
 * http://www.sofa.io
 *
 * Copyright (c) 2013 CouchCommerce GmbH (http://www.couchcommerce.org) and other contributors
 * THIS SOFTWARE CONTAINS COMPONENTS OF THE SOFA SDK (SOFA.IO).
 * IT IS PROVIDED UNDER THE LICENSE TERMS OF THE ATTACHED LICENSE.TXT.
 */
!function(){function a(){try{return h in f&&f[h]}catch(a){return!1}}function b(a){return function(){var b=Array.prototype.slice.call(arguments,0);b.unshift(d),j.appendChild(d),d.addBehavior("#default#userData"),d.load(h);var c=a.apply(e,b);return j.removeChild(d),c}}function c(a){return a.replace(m,"___")}var d,e={},f=window,g=f.document,h="localStorage",i="__storejs__";if(e.disabled=!1,e.set=function(){},e.get=function(){},e.remove=function(){},e.clear=function(){},e.transact=function(a,b,c){var d=e.get(a);null==c&&(c=b,b=null),"undefined"==typeof d&&(d=b||{}),c(d),e.set(a,d)},e.getAll=function(){},e.serialize=function(a){return JSON.stringify(a)},e.deserialize=function(a){if("string"!=typeof a)return void 0;try{return JSON.parse(a)}catch(b){return a||void 0}},a())d=f[h],e.set=function(a,b){return void 0===b?e.remove(a):(d.setItem(a,e.serialize(b)),b)},e.get=function(a){return e.deserialize(d.getItem(a))},e.remove=function(a){d.removeItem(a)},e.clear=function(){d.clear()},e.getAll=function(){for(var a={},b=0;b<d.length;++b){var c=d.key(b);a[c]=e.get(c)}return a};else if(g.documentElement.addBehavior){var j,k;try{k=new ActiveXObject("htmlfile"),k.open(),k.write('<script>document.w=window</script><iframe src="/favicon.ico"></frame>'),k.close(),j=k.w.frames[0].document,d=j.createElement("div")}catch(l){d=g.createElement("div"),j=g.body}var m=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");e.set=b(function(a,b,d){return b=c(b),void 0===d?e.remove(b):(a.setAttribute(b,e.serialize(d)),a.save(h),d)}),e.get=b(function(a,b){return b=c(b),e.deserialize(a.getAttribute(b))}),e.remove=b(function(a,b){b=c(b),a.removeAttribute(b),a.save(h)}),e.clear=b(function(a){var b=a.XMLDocument.documentElement.attributes;a.load(h);for(var c,d=0;c=b[d];d++)a.removeAttribute(c.name);a.save(h)}),e.getAll=b(function(a){for(var b,d=a.XMLDocument.documentElement.attributes,f={},g=0;b=d[g];++g){var h=c(b.name);f[b.name]=e.deserialize(a.getAttribute(h))}return f})}try{e.set(i,i),e.get(i)!=i&&(e.disabled=!0),e.remove(i)}catch(l){e.disabled=!0}e.enabled=!e.disabled,"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define(e):this.store=e}(),function(a){"use strict";a.define("sofa.LocalStorageService",function(){return store}),a.define("sofa.MemoryStorageService",function(){var a={},b=function(b,c){a[b]=c},c=function(b){return a[b]},d=function(b){delete a[b]},e=function(){a={}};return{set:b,get:c,remove:d,clear:e}})}(sofa);