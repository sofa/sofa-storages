/**
 * sofa-storages - v0.5.2 - Wed Apr 08 2015 13:38:54 GMT+0200 (CEST)
 * http://www.sofa.io
 *
 * Copyright (c) 2014 CouchCommerce GmbH (http://www.couchcommerce.com / http://www.sofa.io) and other contributors
 * THIS SOFTWARE CONTAINS COMPONENTS OF THE SOFA.IO COUCHCOMMERCE SDK (WWW.SOFA.IO)
 * IT IS PROVIDED UNDER THE LICENSE TERMS OF THE ATTACHED LICENSE.TXT.
 */
!function(e,t,n){e.define("sofa.LocalStorageService",function(){return store}),e.define("sofa.MemoryStorageService",function(){var e={},t=function(t,n){e[t]=n},n=function(t){return e[t]},r=function(t){delete e[t]},i=function(){e={}};return{set:t,get:n,remove:r,clear:i}}),function(e){function t(){try{return f in a&&a[f]}catch(e){return!1}}function r(e){return function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(o),d.appendChild(o),o.addBehavior("#default#userData"),o.load(f);var n=e.apply(u,t);return d.removeChild(o),n}}function i(e){return e.replace(v,"___")}var o,u={},a=window,c=a.document,f="localStorage",l="__storejs__";if(u.disabled=!1,u.set=function(){},u.get=function(){},u.remove=function(){},u.clear=function(){},u.transact=function(e,t,n){var r=u.get(e);null==n&&(n=t,t=null),"undefined"==typeof r&&(r=t||{}),n(r),u.set(e,r)},u.getAll=function(){},u.serialize=function(e){return JSON.stringify(e)},u.deserialize=function(e){if("string"!=typeof e)return n;try{return JSON.parse(e)}catch(t){return e||n}},t())o=a[f],u.set=function(e,t){return t===n?u.remove(e):(o.setItem(e,u.serialize(t)),t)},u.get=function(e){return u.deserialize(o.getItem(e))},u.remove=function(e){o.removeItem(e)},u.clear=function(){o.clear()},u.getAll=function(){for(var e={},t=0;t<o.length;++t){var n=o.key(t);e[n]=u.get(n)}return e};else if(c.documentElement.addBehavior){var d,s;try{s=new ActiveXObject("htmlfile"),s.open(),s.write('<script>document.w=window</script><iframe src="/favicon.ico"></frame>'),s.close(),d=s.w.frames[0].document,o=d.createElement("div")}catch(m){o=c.createElement("div"),d=c.body}var v=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");u.set=r(function(e,t,r){return t=i(t),r===n?u.remove(t):(e.setAttribute(t,u.serialize(r)),e.save(f),r)}),u.get=r(function(e,t){return t=i(t),u.deserialize(e.getAttribute(t))}),u.remove=r(function(e,t){t=i(t),e.removeAttribute(t),e.save(f)}),u.clear=r(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(f);for(var n,r=0;n=t[r];r++)e.removeAttribute(n.name);e.save(f)}),u.getAll=r(function(e){for(var t,n=e.XMLDocument.documentElement.attributes,r={},o=0;t=n[o];++o){var a=i(t.name);r[t.name]=u.deserialize(e.getAttribute(a))}return r})}try{u.set(l,l),u.get(l)!=l&&(u.disabled=!0),u.remove(l)}catch(m){u.disabled=!0}u.enabled=!u.disabled,"undefined"!=typeof module&&module.exports?module.exports=u:"function"==typeof define&&define.amd?define(u):e.store=u}(window)}(sofa,document);