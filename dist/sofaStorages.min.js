/**
 * sofa-storages - v0.4.0 - Fri Feb 06 2015 16:33:55 GMT+0100 (CET)
 * http://www.sofa.io
 *
 * Copyright (c) 2014 CouchCommerce GmbH (http://www.couchcommerce.com / http://www.sofa.io) and other contributors
 * THIS SOFTWARE CONTAINS COMPONENTS OF THE SOFA.IO COUCHCOMMERCE SDK (WWW.SOFA.IO)
 * IT IS PROVIDED UNDER THE LICENSE TERMS OF THE ATTACHED LICENSE.TXT.
 */
!function(e,t,n){"use strict";e.define("sofa.LocalStorageService",function(){return store}),e.define("sofa.MemoryStorageService",function(){var e={},t=function(t,n){e[t]=n},n=function(t){return e[t]},r=function(t){delete e[t]},i=function(){e={}};return{set:t,get:n,remove:r,clear:i}}),function(){function e(){try{return c in u&&u[c]}catch(e){return!1}}function t(e){return function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(i),l.appendChild(i),i.addBehavior("#default#userData"),i.load(c);var n=e.apply(o,t);return l.removeChild(i),n}}function r(e){return e.replace(m,"___")}var i,o={},u=window,a=u.document,c="localStorage",f="__storejs__";if(o.disabled=!1,o.set=function(){},o.get=function(){},o.remove=function(){},o.clear=function(){},o.transact=function(e,t,n){var r=o.get(e);null==n&&(n=t,t=null),"undefined"==typeof r&&(r=t||{}),n(r),o.set(e,r)},o.getAll=function(){},o.serialize=function(e){return JSON.stringify(e)},o.deserialize=function(e){if("string"!=typeof e)return n;try{return JSON.parse(e)}catch(t){return e||n}},e())i=u[c],o.set=function(e,t){return t===n?o.remove(e):(i.setItem(e,o.serialize(t)),t)},o.get=function(e){return o.deserialize(i.getItem(e))},o.remove=function(e){i.removeItem(e)},o.clear=function(){i.clear()},o.getAll=function(){for(var e={},t=0;t<i.length;++t){var n=i.key(t);e[n]=o.get(n)}return e};else if(a.documentElement.addBehavior){var l,s;try{s=new ActiveXObject("htmlfile"),s.open(),s.write('<script>document.w=window</script><iframe src="/favicon.ico"></frame>'),s.close(),l=s.w.frames[0].document,i=l.createElement("div")}catch(d){i=a.createElement("div"),l=a.body}var m=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");o.set=t(function(e,t,i){return t=r(t),i===n?o.remove(t):(e.setAttribute(t,o.serialize(i)),e.save(c),i)}),o.get=t(function(e,t){return t=r(t),o.deserialize(e.getAttribute(t))}),o.remove=t(function(e,t){t=r(t),e.removeAttribute(t),e.save(c)}),o.clear=t(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(c);for(var n,r=0;n=t[r];r++)e.removeAttribute(n.name);e.save(c)}),o.getAll=t(function(e){for(var t,n=e.XMLDocument.documentElement.attributes,i={},u=0;t=n[u];++u){var a=r(t.name);i[t.name]=o.deserialize(e.getAttribute(a))}return i})}try{o.set(f,f),o.get(f)!=f&&(o.disabled=!0),o.remove(f)}catch(d){o.disabled=!0}o.enabled=!o.disabled,"undefined"!=typeof module&&module.exports?module.exports=o:"function"==typeof define&&define.amd?define(o):this.store=o}()}(sofa,document);